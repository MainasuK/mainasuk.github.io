<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Below the horizon</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="Below the horizon">
<meta property="og:url" content="http://mainasuk.com/index.html">
<meta property="og:site_name" content="Below the horizon">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Below the horizon">
<meta name="twitter:description">
<meta name="twitter:creator" content="@mainasuk">
  
    <link rel="alternative" href="/atom.xml" title="Below the horizon" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.useso.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-71683065-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Below the horizon</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://mainasuk.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-OpenGLPicking" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/01/18/OpenGLPicking/" class="article-date">
  <time datetime="2016-01-18T11:09:00.000Z" itemprop="datePublished">2016-01-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/18/OpenGLPicking/">OpenGL 鼠标拾取漫谈</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>OpenGL 有多种方法可以实现鼠标拾取物体，其中的两种方法比较常用。第一种通常被认为是标准的选择方法，它跟踪被选中像素或包括其周围的一小片区域的所有对象，接下来具体介绍这种方法。第二种是选取一个颜色集，用互不相同的颜色绘制可以被选中的对象，通过检查选中点的颜色缓存的颜色来识别出选择对象。</p>
<h3 id="u5BF9_u8C61"><a href="#u5BF9_u8C61" class="headerlink" title="对象"></a>对象</h3><p>我们抽象地认为在 <code>glBegin(…)</code> 和 <code>glEnd()</code> 之间绘制的图形为一个对象，它存在于世界坐标系中。通过投影和变换将其转化为图像绘制在屏幕上后，如何通过鼠标选中的屏幕上的像素点来选中一个存在于三维世界坐标系的物体呢，OpenGL 提出了一种强大的解决方案供我们使用。</p>
<h3 id="u540D_u79F0"><a href="#u540D_u79F0" class="headerlink" title="名称"></a>名称</h3><p>首先我们区分出可以被选中的物体，将它赋予一个名称（name），在绘制过程中，如果有名称的对象覆盖了选中的像素点，则将名称保存到一个选择缓存中。有趣的是，我们还可以使用层次结构的名称来命名一个物体，对于一辆汽车，我们可以说选中了一个车门，或者选中了一辆汽车，这为我们调整选中的精细度提供了可能。</p>
<p>虽然说是一个 name，但实际上是一个无符号整形（GLuint），用枚举来表示的话确实和名称差不多，嘛～</p>
<h3 id="u540D_u79F0_u6808"><a href="#u540D_u79F0_u6808" class="headerlink" title="名称栈"></a>名称栈</h3><p>OpenGL 使用栈来保存名称，称其为名称栈（name stack），当绘制到选中的像素点时，则将栈中的全部信息都保存到选择缓存内，理解这个操作对理解拾取的实现是至关重要的。上面所说的层次结构就是使用压栈、出栈的方法实现的。</p>
<h3 id="u9009_u62E9_u7F13_u5B58"><a href="#u9009_u62E9_u7F13_u5B58" class="headerlink" title="选择缓存"></a>选择缓存</h3><p>选择缓存是一个 GLuint 类型的数组，由用户创建，通过 <code>glSelectBuffer(GLsizei size, GLuint *buffer)</code> 函数完成缓存设置。设置完毕后，API 在绘制时将会自动完成名称的记录工作，选择缓存的结构大致如下：</p>
<p><img src="http://ww4.sinaimg.cn/large/72d7aee5jw1f03s38pq40j20sg0lcq3k.jpg" alt="选择缓存"></p>
<p>当对象绘制过程中覆盖到选中点时，名称栈中的信息将自动添加到选择缓存中，名称表的长度由名称数确定，若多于一个名称的，按名称添加的层次顺序排序，即先添加（入栈）的名称排在前；<code>zmin</code> 和 <code>zmax</code> 记录该对象在深度缓冲中的高度，离视点越远数值越大。</p>
<p>选择缓存中的每一个对象的相关信息可由 [3+N] 个无符号整型值表示，当我们不使用层次结构的名称来命名时，可以认为第 i 个对象的名称为 buf[i][3]。</p>
        
          <p class="article-more-link">
            <a href="/2016/01/18/OpenGLPicking/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://mainasuk.com/2016/01/18/OpenGLPicking/" data-id="cijjve2tr000073mumfg9et8p" class="article-share-link">Share</a>
      
        <a href="http://mainasuk.com/2016/01/18/OpenGLPicking/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/OpenGL/">OpenGL</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-HypercubeVisualize" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/01/13/HypercubeVisualize/" class="article-date">
  <time datetime="2016-01-13T08:36:00.000Z" itemprop="datePublished">2016-01-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/13/HypercubeVisualize/">可视化超立方体</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>读过《思考的乐趣》的朋友一定还记得最后一章中那个令人匪夷所思的四维超立方体（<a href="https://zh.wikipedia.org/wiki/超方形">hypercube</a>），生活在三维世界中的我们居然也可以去想象更高维的空间，真是有趣。</p>
<h1 id="u5EFA_u6A21"><a href="#u5EFA_u6A21" class="headerlink" title="建模"></a>建模</h1><p>可视化的第一步就是建模，类似于三维立方体，用四维坐标（x, y, z, w）表示超立方体的顶点。按照每增加一个维度，顶点数翻倍的规律来看，超立方体的顶点是立方体的两倍，即 16 个顶点。一种典型的超立方体的所有顶点可由下表列出。</p>
        
          <p class="article-more-link">
            <a href="/2016/01/13/HypercubeVisualize/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://mainasuk.com/2016/01/13/HypercubeVisualize/" data-id="cijckxq930007ndmua5yrbuxw" class="article-share-link">Share</a>
      
        <a href="http://mainasuk.com/2016/01/13/HypercubeVisualize/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Math/">Math</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/OpenGL/">OpenGL</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-OpenGLTexture" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/01/02/OpenGLTexture/" class="article-date">
  <time datetime="2016-01-02T07:58:00.000Z" itemprop="datePublished">2016-01-02</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/02/OpenGLTexture/">OpenGL 纹理漫谈</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="2D__u7EB9_u7406_u6620_u5C04"><a href="#2D__u7EB9_u7406_u6620_u5C04" class="headerlink" title="2D 纹理映射"></a>2D 纹理映射</h1><p>纹理映射一般是在图形的坐标值已经计算完成时附加在顶点信息上的，而非对纹理进行透视、变换再显示。下面逐步介绍如何在 OpenGL 中开启纹理映射，它的顺序有先后但并不唯一，若是想颠倒一下顺序也不妨试试看会有什么效果🙃️</p>
<h2 id="u8BFB_u53D6_u7EB9_u7406_u56FE"><a href="#u8BFB_u53D6_u7EB9_u7406_u56FE" class="headerlink" title="读取纹理图"></a>读取纹理图</h2><p>纹理图的格式一般为原始 RGB 格式，一个字节（8 bits）代表一种颜色通道，一个像素的颜色用三个字节表示，例如白色记为 <code>#FFFFFF</code>，是不是很熟悉，这种表示方式即 RGB888，由或者称其为 24 位真彩色。除此之外还有一些其他常用的格式：RGBA8888，RGB565，RGBA5551……</p>
<p>纹理图通常是正方形，若图形 API 没有严格限制，也可以为矩形。大多数图形卡及图形 API 为了效率的原因，限制图像分辨率为 2 的幂，例如 256*256，具体要求请参考文档。</p>
<p><img src="http://ww4.sinaimg.cn/large/72d7aee5jw1f068lt6aaaj218v0qaqar.jpg" alt="Photoshop 导出原始 RGB 图像"></p>
<p>这里我们使用 Photoshop 将图片裁剪成 512*512 分辨率，然后将其导出为原始 RGB 格式的图像，只要在存储时选择 Photoshop raw 格式即可（别和单反的那种 RAW 搞混了哦）。导出后的文件记录着自左上角向右下角逐行扫描的 RGB 信息。</p>
<p><img src="http://ww2.sinaimg.cn/large/72d7aee5jw1f068pzyeqxj20te0itwm5.jpg" alt="查看 RAW 文件"></p>
<p>使用十六进制文本查看器查看导出的文件，可以看到共 512*512*3 = 786432 字节，查看前三个字节组成的颜色 <code>#444135</code>，大致是深褐色。</p>
        
          <p class="article-more-link">
            <a href="/2016/01/02/OpenGLTexture/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://mainasuk.com/2016/01/02/OpenGLTexture/" data-id="cijmya6nc0000i9muagbo9gnb" class="article-share-link">Share</a>
      
        <a href="http://mainasuk.com/2016/01/02/OpenGLTexture/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/OpenGL/">OpenGL</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Linux-assemble-and-Compute" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/12/25/Linux-assemble-and-Compute/" class="article-date">
  <time datetime="2015-12-25T02:30:00.000Z" itemprop="datePublished">2015-12-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/25/Linux-assemble-and-Compute/">Linux 汇编初体验与计算的目的</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>说起来真的让人难以置信，我校汇编教材是老师自己写自己印的，拿到手的时候不由得想起高中在学校自己的印刷室里帮老师装订复习资料的场景……</p>
<p>好吧，Windows 系统下 的 DEBUG 只能说是勉强够用。先在记事本里写好程序，之后一行行敲入 DEBUG 下，调试起来甚至会简单一些。更进一步，用 MASA 和 LINK 也可以直接将汇编源文件编译成可执行文件。不过这里我以 Linux 为基础，如果对汇编有兴趣，可以尝试着写几个有用的程序，比如说～嗯， <code>0A</code> 与 <code>0D 0A</code> 间自由转换的转换器？</p>
<p>&gt; 从字节层面看文本文件，Windows 操作系统以 0D 0A（16进制）作为换行标记（End of Line，EOL），而 Linux 则以 0A 作为 EOL。于是，Linux 下编写的文本文件在 Windows 的记事本中会丢失换行符。乱码？噢，不不不，那是因为 Linux 以 Unicode 保存汉字，而 Windows 记事本以 GBK 编码去解析造成的，对于中文世界，情况大多如此。</p>
        
          <p class="article-more-link">
            <a href="/2015/12/25/Linux-assemble-and-Compute/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://mainasuk.com/2015/12/25/Linux-assemble-and-Compute/" data-id="cijckxq8o0000ndmu3ylfr6ms" class="article-share-link">Share</a>
      
        <a href="http://mainasuk.com/2015/12/25/Linux-assemble-and-Compute/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/汇编/">汇编</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/计算机/">计算机</a></li></ul>

    </footer>
  </div>
  
</article>


  
  
</section>
        
          <aside id="sidebar">
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Math/">Math</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OpenGL/">OpenGL</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/汇编/">汇编</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/计算机/">计算机</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Linux/" style="font-size: 10px;">Linux</a> <a href="/tags/Math/" style="font-size: 10px;">Math</a> <a href="/tags/OpenGL/" style="font-size: 20px;">OpenGL</a> <a href="/tags/汇编/" style="font-size: 10px;">汇编</a> <a href="/tags/计算机/" style="font-size: 10px;">计算机</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">一月 2016</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">十二月 2015</a><span class="archive-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/01/18/OpenGLPicking/">OpenGL 鼠标拾取漫谈</a>
          </li>
        
          <li>
            <a href="/2016/01/13/HypercubeVisualize/">可视化超立方体</a>
          </li>
        
          <li>
            <a href="/2016/01/02/OpenGLTexture/">OpenGL 纹理漫谈</a>
          </li>
        
          <li>
            <a href="/2015/12/25/Linux-assemble-and-Compute/">Linux 汇编初体验与计算的目的</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 MainasuK<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    
<script>
  var disqus_shortname = 'belowthehorizon';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.useso.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>